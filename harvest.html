<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Meta tags for character encoding and viewport settings -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Title of the webpage -->
    <title>Infinite Eclipse - Ressources</title>
    <!-- Link to the external CSS stylesheet -->
    <link rel="stylesheet" href="assets/css/harvest.css">
    <link rel="stylesheet" href="assets/css/musicplayer.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/currencyDisplay.css">
    <link rel="website icon" href="profile.png" type="png">
</head>
<body>
    <div id="currencyDisplay" class="currency-display">
        <div class="currency-item">
            <span id="walletAmountDisplay">0 💎</span>
        </div>
        <div class="currency-item">
            <img src="assets/images/eclipse_shard.png" alt="Éclats du Crépuscule" class="currency-icon">
            <span id="eclipseShardAmount">0</span>
        </div>
    </div>
    <!-- Bouton pour ouvrir/fermer la sidebar -->
    <button id="sidebarToggle" onclick="toggleSidebar()" aria-label="Ouvrir ou fermer la barre latérale">☰</button>

    <!-- Sidebar masquée par défaut -->
    <div class="sidebar hidden">
        <img src="assets/images/infinite-eclipse-logo-c.png" alt="Logo">
        <h2>Menu</h2>
        <button class="btn" onclick="location.href='home-webside.html'">Accueil</button>
        <button class="btn" onclick="location.href='updatelogs.html'">Update Logs</button>
        <button class="btn" onclick="location.href='caracthermanager.html'">Gestionnaire de Personnages</button>
        <button class="btn" onclick="location.href='index.html'">Gestion d'Inventaire</button>
        <button class="btn" onclick="location.href='xpcalculator.html'">Calculateur d'XP</button>
        <button class="btn" onclick="location.href='wallet.html'">Portefeuille</button>
        <button class="btn" onclick="location.href='chestopener.html'">Ouverture de Coffres</button>
        <button class="btn" onclick="location.href='quests.html'">Quêtes</button>
        <button class="btn" onclick="location.href='kitchen.html'">Cuisine</button>
        <button class="btn" onclick="location.href='harvest.html'">Ressources</button>
        <button class="btn" onclick="location.href='classments.html'">Classements</button>
        <button class="btn" onclick="location.href='credentials.html'">Contributeurs</button>

        <!-- Lecteur de musique -->
        <div class="music-player">
            <button id="muteButton" onclick="toggleMute()" aria-label="Activer ou désactiver le son">🔇</button>
            <button id="playPauseButton" onclick="togglePlayPause()" aria-label="Lecture ou pause">▶️</button>
            <select id="musicSelector" onchange="changeTrack()" aria-label="Sélectionner une piste">
                <option value="sons/Whispers of the Wanderer.mp3">Whispers of the Wanderer</option>
                <option value="sons/Whispers of the Ancient Plains.mp3">Whispers of the Ancient Plains</option>
                <option value="sons/Waves of Fortune.mp3">Waves Of Fortune</option>
                <option value="sons/Gats.mp3">Gats - Berserk OST</option>
            </select>
            <div class="volume-control">
                <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" oninput="changeVolume()" aria-label="Régler le volume">
            </div>
        </div>
    </div>

    

    <h1>Ressources</h1>
<div id="openModalBtn" class="open-modal-btn" onclick="openModal(document.getElementById('harvest-modal'))">🌱 Lancer une récolte</div>
<div id="OpenMineBtn" class="open-modal-btn" onclick="openModal(document.getElementById('mining-zone-modal'))">⛏️ Lancer le minage</div>

<!-- Section pour afficher l'historique des récoltes -->
<section id="harvest-history">
    <h2>Historique des récoltes</h2>
    <ul id="history-list"></ul>
</section>
<div id="eraseHistory" class="erase-history-btn" onclick="eraseHarvestHistory()">🗑️ Effacer l'historique</div>

<!-- Modal pour définir les paramètres de récolte -->
<dialog id="harvest-modal" class="hidden">
  <form method="dialog" id="harvest-form" class="modal-content">
      <h2>Définir les paramètres de récolte</h2>
      <br>
      <p>Choisissez la zone, la saison et le type d'objet que vous souhaitez récolter.</p>
      <br>

      <!-- Fields -->
      <label for="zone">Zone de récolte :</label>
      <br>
      <select id="zone" required>
          <option value="plaine-prélude">Plaine du Prélude 🌱</option>
          <option value="foret-damnés">Forêt des Damnés 🌱</option>
          <option value="falaises-baron">Falaises du Baron 🌱</option>
      </select>
      <br>

      <label for="season">Saison :</label>
      <br>
      <select id="season" required>
          <option value="aube">Aube</option>
          <option value="printemps">Printemps</option>
          <option value="été">Été</option>
          <option value="pluie">Pluies</option>
          <option value="automne">Automne</option>
          <option value="hiver">Hiver</option>
          <option value="sommeil">Sommeils</option>
      </select>
      <br>

      <label for="type">Type recherché :</label>
      <br>
      <select id="type" required>
          <option value="fruit">Fruit</option>
          <option value="légume">Légume</option>
          <option value="fleur">Fleur</option>
      </select>
      <br>

      <button type="submit">Récolter</button>
      <br>  
      <button type="button" class="cancel-btn" onclick="closeModal(document.getElementById('harvest-modal'))">Annuler</button>
  </form>
</dialog>

<!-- Modal pour sélectionner la zone de minage -->
<dialog id="mining-zone-modal" class="hidden">
    <form method="dialog" id="mining-zone-form" class="modal-content">
        <h2>Choisir une zone de minage</h2>
        <br>
        <label for="mining-zone">Zone de minage :</label>
        <br>
        <select id="mining-zone" required>
            <option value="grotte-rivage">Grotte du Rivage ⛏️</option>
        </select>
        <br>
        <button type="submit">Commencer le minage</button>
        <br>
        <button type="button" class="cancel-btn" onclick="closeModal(document.getElementById('mining-zone-modal'))">Annuler</button>
    </form>
  </dialog>
  
  <!-- Modal pour le mini-jeu de minage -->
<dialog id="mining-game-modal" class="hidden">
    <div class="modal-content">
        <h2>Mini-jeu de Minage</h2>
        <p>Cliquez sur la pierre pour la casser et révéler un minerai !</p>
        <div class="mining-container">
            <img id="mining-pickaxe" src="assets/images/pickaxe.png" alt="Pioche" class="mining-pickaxe">
            <img id="mining-rock" src="assets/images/rock_normal.png" alt="Pierre" class="mining-rock">
        </div>
        <p id="mining-progress">Clics restants : <span id="clicks-left">4</span></p>
        <audio id="mining-sound" src="sons/miningSoundEffect.mp3"></audio>
        <button type="button" class="cancel-btn" onclick="closeModal(document.getElementById('mining-game-modal'))">Annuler</button>
    </div>
</dialog>

<!-- Modal pour afficher le résultat de la récolte -->
<dialog id="harvest-result-modal" class="hidden">
  <div class="modal-content">
      <img id="result-img" src="" alt="Image de l'objet récolté" class="result-img">
      <div class="result-text">
          <h2 id="result-name">Nom de l'objet</h2>
          <p id="result-desc">Description de l'objet</p>
          <p id="result-rarity">Rareté : <span></span></p>
          <button class="confirm-btn" id="closeResultModalBtn" onclick="closeModal(document.getElementById('harvest-result-modal'))">Fermer</button>
          <audio id="result-sound" src="sons/item-normal.mp3"></audio>
      </div>
  </div>
</dialog>
<script src="assets/js/harvest.js"></script>
<script src="assets/js/MusicPlayer.js"></script>
<script src="assets/js/Sidebar.js"></script>
<script src="assets/js/currencyDisplay.js"></script>
</body>
</html>